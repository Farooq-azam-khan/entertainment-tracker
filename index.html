<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Rust and Elm</title>
  <meta name="description" content="Rust and Elm">
  <meta name="author" content="Relm">
  <script src="elm.js"></script>


</head>

<body>
  <main id="elm-container"></main>
  <script>
    const node = document.querySelector('#elm-container')
    const TOKEN_KEY = '__ENTERTAINMENT_TRACKER__'
    if (node) {
      const app = Elm.Main.init({
        node,
        flags: {
          storedToken: localStorage.getItem(TOKEN_KEY)
        }
      })
      app.ports.sendTokenToStorage.subscribe(token => {
        localStorage.setItem(TOKEN_KEY, token)
      })
    }
  </script>

</body>

</html>